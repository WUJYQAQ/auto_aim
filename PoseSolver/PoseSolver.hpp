#ifndef POSE_HPP
#define POSE_HPP
#include "opencv2/core/core.hpp"
#include <opencv2/opencv.hpp>
#include<iostream>


enum ArmorType
{
	smallArmor = 0,
	bigArmor = 1
};

struct PnP_Results
{
	float yaw_angle;
	float pitch_angle;
	int distance;
	PnP_Results() 
	{
    yaw_angle   = 0.f;
    pitch_angle = 0.f;
    distance       = 0;
  	}
};

struct PnPConfig
{
	int smallArmorHeight = 60;
	int smallArmorWidth = 140;

	int bigArmorHeight = 60;
	int bigArmorWidth = 245;
};



class PoseSolver
{
public:


	//CalculateResults calResults;

	//CalculateResults* calResult = (CalculateResults*)malloc(sizeof(calResults));//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矒閺屸€崇暆閳ь剟宕伴弽顓炵畺鐟滄柨鐣锋總鍛婂亜闁告繂瀚▓銉╂⒒閸屾瑧顦﹂柟璇х節瀹曞湱鎲撮崟顒€寮块梺鍦檸閸犳牠鎮″鈧弻鐔告綇妤ｅ啯顎嶉梺绋款儐閸旀瑩骞冨Δ鍛嵍妞ゆ挾鍊姀掳浜滈柕澶涘缁犳绱掓潏銊﹀鞍闁瑰嘲鎳樺畷顐﹀礋绾版ê浜剧€光偓閸曨剛鍘遍梺闈浨归崕鎶藉春閿濆洠鍋撳▓鍨灈妞ゎ厾鍏樺顐﹀箛椤撶偟绐炴繝鐢靛Т鐎氱兘宕ラ崨瀛樷拻濞达絿鎳撻婊呯磼鐠囨彃鈧潡鐛径濞炬闁靛繒濮烽鎺旂磽閸屾瑧鍔嶆い顓炴喘瀹曘垽骞栨担鍏夋嫼闂佸憡绋戦敃锝囨闁秵鐓曢柣妯诲墯濞堟粎鈧娲橀崝娆撶嵁閸ヮ剚鍋嬮柛顐犲灩楠炴劙鏌ｆ惔鈥冲辅闁稿鎹囬幃妤呮晲鎼粹€愁潾闂佷紮绠戦悧鎾诲箖濡ゅ啯鍠嗛柛鏇ㄥ墰椤︺劑鏌ｉ姀鈺佺仭閻㈩垳鍠栭幃姗€骞掑Δ浣哄幗闂佺粯鍔曢顓㈠煝閹剧粯鐓冪憸婊堝礈濞嗘挸鍌ㄩ柡宥冨妿閻濆爼鏌￠崶銉ョ仾闁抽攱鍨块弻娑樷攽閸℃浼€闂佸疇顕чˇ鐢稿蓟濞戞埃鍋撻敍鍗炲暕婢规洟姊婚崒娆掑厡閺嬵亝銇勯幋婵囶棦妤犵偞鍔欓獮鏍ㄧ瑹婵犲嫮鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛鈩冪⊕閻撴洟鎮橀悙鎻掆挃闁轰焦鐗犻弻鏇熺箾閻愵剚鐝曢梺鎶芥敱閸ㄥ潡寮诲☉妯锋斀闁糕剝顨忔导鍌氼渻閵堝骸浜剧紒鐘虫崌瀵鈽夐姀鐘电潉闂侀€炲苯澧寸€规洖缍婂畷绋课旈崘銊с偊闂備礁鎲￠崝锕傚窗閺嶎叏缍栭柛娑樼摠閻撳繘鏌涢锝囩畺妞ゃ儳鍋ら弻娑欐償椤斿鍋楅梺鍝勭焿缂嶄線骞冮姀銈呬紶闁靛绠戝▍鎴︽⒑鐠囨彃顒㈤柛鎴濈秺瀹曟粓鎮㈤悡搴ｇ暰闂佸憡鍔忛弬鍌炲磻閸涘瓨鐓曢柟鑸妽閺夊綊鏌熸搴ｅ笡缂佺粯绋掑蹇涘礈瑜嶉崺宀勬⒑绾拋鍤嬬紒缁樼箞閻涱噣宕卞☉姗€鍞堕梺缁樻⒒缁绘繄鑺辨繝姘拺闁荤喐澹嗛幗鐘电磼鐠囨彃鏆ｇ€规洝娅曠粋鎺斺偓锝庡亞閸樻捇鎮峰⿰鍕煉鐎规洘绮岄～婵嬫嚋闂堟稑澹掓俊鐐€栧ú宥夊磻閹惧灈鍋撶憴鍕┛缂佺粯绻傞悾宄拔熸笟顖氭櫊濡炪倖鏌ㄩ崥瀣敇閹稿簼绻嗛柣鎰典簻閳ь剚鐗犲畷婵婎槾缂侇喖顭烽獮瀣偐閸忓摜鐟濆┑鐘垫暩婵數鍠婂澶婄；闁挎繂顦伴悡鏇㈡煏婢跺鐏ラ柛鐔哄椤ㄣ儵宕惰濞撳鏌曢崼婵嗘殭闁告梹绮庣槐鎺旀嫚閼碱剙顣哄銈庡亜缁绘劗鍙呭銈呯箰閹峰螞閸愩劉鏀介柣鎰綑閻忥箓鏌よぐ鎺旂暫闁靛棗鍊垮畷顐﹀礋閵婏附鏉搁梻浣哥枃濡嫬螞濡や胶顩叉繝闈涙储娴滄粓鏌曟繛鍨姷闂婎剦鍓熼弻鏇㈠幢閺囩姷鐛㈤悗娈垮櫘閸ｏ絽鐣烽悡搴樻斀閻庯綆浜濋弳顏堟⒒閸屾瑧顦﹂柟纰卞亜鐓ら柕濞炬櫅缁愭鏌熼幑鎰靛殭闁稿被鍔戦弻锝夊閵忊剝姣勭紒鐐礃濡嫰婀侀梺鎸庣箓閹冲酣藟韫囨稒鐓曢幖娣灩婵秹鏌熼绛嬫畼缂侇噮鍘奸埥澶娢熺紒妯诲€风紓鍌欑劍閸旀牠銆冮崱娑樼疄闁靛ǹ鍎哄〒濠氭偣閸ヮ亜绱﹀瑙勬礋濮婄粯鎷呴崨濠冨創婵犮垼娉涘ú顓炵暦濠婂啠鏀介悗锝庝簽椤斿棝姊洪崨濠佺繁闁搞劑浜跺畷浼村幢濞戞瑧鍘遍梺鍝勬储閸斿本绂嶉悙鐑樼叆婵炴垶鐟﹀畷宀勬煛瀹€瀣ɑ闁诡垱妫冩慨鈧柍杞扮劍濞呮盯姊绘笟鈧鑽ょ礊閸℃稑闂柨婵嗘噽閺嗭附绻濇繝鍌滃闁稿瀚板濠氬焵椤掑嫬绠涙い鏂垮⒔閺嗕即姊婚崒娆戭槮濠㈢懓锕畷鎴﹀川椤掑吋妞藉浠嬵敇閻樿尙銈﹂梻渚€娼х换鍡涘焵椤掑啫鐨虹紒鐘冲哺濮婃椽妫冨☉姘暫闂佸綊鏀遍崹鐢革綖韫囨拹鏃堝礃椤忓棴绱查梻浣筋潐瑜板啴顢栭崶顒佸仼闁割煈鍋呴崣蹇撯攽閻樻彃浜為柣鎾瑰亹閳ь剝顫夊ú妯兼暜閹烘鐓濋幖娣妼缁犳稒銇勯弬鎸庢儓濞寸姵甯掗埞鎴︽偐閸偅姣勯梺绋款儐閻╊垵妫熼梺鍝勵槹閿涙洖煤椤忓懎浜滄俊鐐差儏鐎涒晛鈻撻悙顒傜闁哄鍨甸幃鎴炵箾閸忚偐鎳呯紒顔款嚙閳藉濮€閿涘嫬骞愬┑鐘灱濞夋盯鏁冮敂鐣岊浄闁靛繈鍊栭悡鏇㈡煏閸繃顥滈柣蹇ュ缁辨帞绱掑Ο鑲╃杽闂佽鍠曠划娆徫涢崘顭嬪湱鎷嬮崷顓犘滈梺鍝勮閸婃繈骞冮悜钘夌骇閹煎瓨鎸荤€垫牜绱撻崒娆戣窗闁哥姵鐗犻垾锕傛倻婵劏鍋撴担绯曟闁靛繆鈧枼鍋撻悜鑺ュ€甸柣銏㈡瑜版帞宓佹俊銈呮噺閳锋帒霉閿濆嫯顒熼柡鈧导瀛樼厵婵炶尪顔婄花鐣屸偓鍨緲閿曨亜鐣烽幇鐗堝亞濞达綀顫夐惁锝夋⒒閸屾艾鈧悂宕愭搴ｇ焼濞撴埃鍋撴鐐寸墵椤㈡洟鏁冮埀顒傜不閻樿崵鍙撻柛銉ｅ妿閳藉绱掗悩宕囧⒌闁哄本绋戦悾婵嬪焵椤掑嫬纾绘繛鎴欏灪鐎氬懘鏌ｉ弬鍨倯闁绘挶鍎甸弻锝夊棘閹稿孩鍎撻悗娑欑箘缁辨帡鎮欓鈧崝銈夋煕濮橆剦鍎愮紒宀冮哺缁绘繈宕堕懜鍨珫婵犵數濞€濞佳呪偓姘€鍥х；闁规崘顕ч悞鍨亜閹烘垵顏柣鎾存礋閹鏁愭惔鈥茬凹閻庤娲栭惉濂稿焵椤掍緡鍟忛柛鐘虫礈閸掓帒鈻庨幘鎵佸亾娓氣偓瀵挳濮€閳ュ厖绨婚梻浣哄亾閼归箖宕愰幖浣€澶婎潩椤撶姷鐦堝┑鐐茬墕閻忔繈寮搁悢鍏肩叆闁哄洦顨嗗▍濠勨偓瑙勬礃缁矂鍩ユ径濠庢僵閺夊牃鏅濋崢鐘崇節閻㈤潧浠滄俊顖氾攻缁傚秴鈹戠€ｎ偄浜楀┑鐐村灟閸ㄦ椽宕愰崼鏇熺厽闁逛即鍋婇弶娲煕閵堝棛鎳冮柍瑙勫灴椤㈡瑩鎮℃惔妯轰壕闁秆勵殔閽冪喖鏌ｉ弮鍌楁嫛闁轰礁锕弻娑樷攽閸℃浼€婵炲鍘ч悧鎾诲箖濡ゅ啯鍠嗛柛鏇ㄥ墰閿涙﹢姊洪崨濠冪叆缂佸鐖奸獮鎴﹀閻橆偅鏂€闁诲函缍嗘禍鐐核囬弶娆炬富闁靛牆鎳愮粻鐗堜繆椤愶絿娲撮柡浣哥Ч閹垽宕楃亸鏍ㄥ闂備胶枪閺堫剟鎳濇ィ鍐ㄧ劦妞ゆ帒瀚峰Λ鎴犵磼椤旇偐澧涢柟宄版嚇閹煎綊宕烽褎笑婵犵數濮烽弫鍛婃叏閺夋垟鏋栨慨姗嗗幖缁剁偤鏌熼柇锕€澧版い鏃€甯￠弻锝夋偐閸欏鈹涢柣蹇撶箲閻熲晞妫熼悷婊冪Ч閸╃偤骞嬮敂缁樻櫓婵犳鍠楅崝鎺斿垝閸洘鈷戠紒瀣儥閸庢劙鏌熼幖浣虹暫闁糕斁鍋撳銈嗗笂缁讹繝宕箛娑欑厱闁挎繂楠稿▍宥団偓瑙勬礃閸ㄥ墎鎹㈠┑瀣倞闁宠桨鑳堕妶锔界節绾版ɑ顫婇柛銊ゅ嵆閹啴鎮滈挊澶岋紱闂佸湱鍋撻弸鐓幬ｉ崼鐔虹闁告粈绀佸鎯瑰⿰搴濋偗闁轰焦鍔欓幃娆撳传閸曨厺绱滈梻浣告惈閸婂爼宕曢弻銉ユ闁逞屽墴濮婄粯鎷呴搹鐟扮闂佸憡姊瑰ú鏍敋閿濆閱囬柡鍥ｅ亾濠㈣泛艌閸亪鏌涘☉鍗炴灈闁哄鍨垮铏规喆閸曢潧鏅遍梺鍝ュУ閻楁绮嬮幒鎾寸秶妞ゎ厽鍨堕鏃堟⒑缂佹ê濮堢憸鏉垮暣瀵啿鈻庨幇鈺€绨婚梺瑙勫劤閸熷潡骞冮幋鐘亾閸偅绶查悗姘煎櫍閸┾偓妞ゆ帒锕︾粔鐢告煕閹惧鎳囬柣娑卞枛椤撳ジ宕ㄩ鍛澑闂備焦瀵х粙鎴犫偓姘煎墯缁傛帒饪伴崟鈺€绨婚梺鐟扮摠缁诲啴宕抽悜妯镐簻闁靛⿵绲介崝锔筋殽閻愬澧柟宄版噽缁瑩宕归缁樺枤闂傚倸鍊风粈浣革耿闁秵鎯為幖娣妼缁愭淇婇妶鍛櫤闁稿鍊圭换娑㈠箣閻愨晜锛堥悷婊呭鐢寮查弻銉︾厱妞ゆ劦鍋勬禍婵堢磽瀹ュ懐澧﹂柟顔筋殘閹叉挳宕熼鍌ゆК闂備焦妞块崜娆撳Χ閹间礁鏄ラ柍褜鍓氶妵鍕箳瀹ュ洩绐楅梺鍝ュ枎缁绘﹢寮诲☉銏℃櫜閹肩补鍓濋悵婵嬫倵鐟欏嫭绀冪紒顔芥崌楠炲啴濮€閵堝棌鎷归梺褰掑亰閸犳岸鎮炬ィ鍐┾拻濞达絿枪椤ュ繘鏌涚€ｎ亝鍣归悡銈夋煛瀹ュ骸骞樼€规挷绶氶弻鏇＄疀婵炴儳浜鹃柤纰卞墰閻ｉ箖姊绘笟鈧褔鎮ч崱娑樼闁瑰瓨绻嶅鏍ㄤ繆閵堝懎鏆熺痪鎯с偢閺岀喖骞撻幒婵嗗壋闂佷紮绲介悘姘跺箞閵婏妇绡€闁稿被鍊楅崥瀣倵鐟欏嫭绀冮悽顖涘浮閸┿垺鎯旈妸銉х杸濡炪倖鏌ㄩ幖顐ｇ閹烘垟鏀介柣妯虹仛閺嗏晠鏌涚€ｎ偆娲撮挊婵嬫煛婢跺绱╂繛宸簼閸嬪嫬顪冪€ｎ亜顒㈡繛鍫㈠亾缁绘盯寮堕幋婵囧€┑鐐插悑閻熝呭垝鐠囨祴妲堥柕蹇ョ磿閸樺憡绻濋姀锝嗙【闁挎洩闄勭粋鎺楀閵堝棛鍘遍梺闈涚墕濡鎮橀敂鍓х＜缂備焦顭囩粻鐐烘煙椤旇崵鐭欐俊顐㈠暙闇夐悹浣告贡缁夘噣鏌＄仦璇测偓婵嬪箖閻戣棄绾ч幖瀛樻尰鐎垫牜绱撻崒娆戣窗闁哥姵鐗犻垾锕傛倻婵劏鍋撴担绯曟闁靛繆鈧枼鍋撻悜鑺ュ€甸柣銏㈡瑜版帞宓佹俊銈呮噺閳锋帒霉閿濆嫯顒熼柡鈧导瀛樼厵婵炶尪顔婄花鐣屸偓鍨緲閿曨亜鐣烽幇鐗堝亞濞达綀顫夐惁锝夋⒒閸屾艾鈧悂宕愭搴ｇ焼濞撴埃鍋撴鐐寸墵椤㈡洟鏁冮埀顒傜不閻樿崵鍙撻柛銉ｅ妿閳藉绱掗悩宕囧⒌闁哄本绋戦悾婵嬪焵椤掑嫬纾绘繛鎴欏灪鐎氬懘鏌ｉ弬鍨倯闁绘挸绻橀弻娑㈩敃閿濆洨顓煎┑陇灏欐灙闂囧鏌ゅù瀣珔闁宠鐗撻弻锛勪沪閸撗勫垱閻庢鍠楅幐铏繆閹间礁唯闁靛牆娲ㄩ崺宥夋⒒閸屾瑨鍏岄弸顏呫亜閹存繃顥㈡鐐村姍閹筹繝濡堕崶鈺冨姽闂備礁婀遍崕銈夊蓟閿熺姴纾婚柟鍓х帛閺呮煡骞栫€涙绠橀柡浣圭墪椤啴濡堕崱妯煎弳闂佸吋妞块崹鍫曞灳閺冨牆绀冩い鏂挎瑜旈弻娑樷槈閸楃偟浠銈嗘煥濞差厼顫忛搹鍦＜婵妫欓悾璺衡攽閳藉棗浜濈紒瀣崌瀹曟岸骞掗幘鍓佺槇濠殿喗锚閸氬寮查鈧埞鎴︽偐濞嗗繐顏╅柛鏂诲€曢湁婵犲﹤鐗忛悾娲煛瀹€瀣М闁诡喓鍨藉畷銊︾節閸曨偄娈ュ┑锛勫亼閸婃洖霉濮橆厾顩叉繝闈涚墛瀹曞弶绻濋棃娑卞剰妞ゎ偄鎳橀弻宥夋寠婢跺妫ら梺鍛婃椤ユ挾妲愰幘瀵哥懝闁搞儜鍕讲缂傚倷鐒﹁ぐ鍐焵椤掑倸鏋斿ù婊勭懇濮婄粯鎷呴崨濠傛殘婵炴挻纰嶉〃濠傜暦娴兼潙绠虫俊銈傚亾缂佺媭鍨辩换娑橆啅椤旇崵鍑归梺缁樻尵閸犳牠寮婚敐鍛傜喖宕崟顐ゎ儓闂備胶鍘ф竟濠冪椤忓牆钃熸繛鎴欏灩濡﹢鏌ら幇浣哥仩妞ゅ浚鍙冨铏光偓鍦閸ゆ瑧绱掓径濠勭Ш闁绘侗鍣ｅ畷鍫曨敆娴ｉ晲缃曢梻浣稿閸嬩線宕硅ぐ鎺斿祦鐎广儱顦伴埛鎺懨归敐鍛暈闁哥喓鍋ら弻娑⑩€﹂幋婵堜桓閻庤娲橀崝娆忣嚕娴犲鏁冮柣鏃囨腹婢规洖鈹戦绛嬬劷闁稿鎸鹃埀顒佺啲閹凤拷

	
	
	PoseSolver()=default;
	explicit PoseSolver(const char* filePath, int camId);

	~PoseSolver(); 

	//CalculateResults* poseSolve();	//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矒閺屸€崇暆閳ь剟宕伴弽顓炵畺鐟滄柨鐣锋總鍛婂亜闁告繂瀚▓銉╂⒒閸屾瑧顦﹂柟璇х節瀹曞湱鎲撮崟顒€寮块梺鍦檸閸犳牠鎮″鈧弻鐔告綇妤ｅ啯顎嶉梺绋款儐閸旀瑩骞冨Δ鍛嵍妞ゆ挾鍊姀掳浜滈柕澶涘缁犳绱掓潏銊﹀鞍闁瑰嘲鎳樺畷顐﹀礋绾版ê浜剧€光偓閸曨剛鍘遍梺闈浨归崕鎶藉春閿濆洠鍋撳▓鍨灈妞ゎ厾鍏樺顐﹀箛椤撶偟绐炴繝鐢靛Т鐎氱兘宕ラ崨瀛樷拻濞达絿鎳撻婊呯磼鐠囨彃鈧潡鐛径濞炬闁靛繒濮烽鎺旂磽閸屾瑧鍔嶆い顓炴喘瀹曘垽骞栨担鍏夋嫼闂佸憡绋戦敃锝囨闁秵鐓曢柣妯诲墯濞堟粎鈧娲橀崝娆撶嵁閸ヮ剚鍋嬮柛顐犲灩楠炴劙鏌ｆ惔鈥冲辅闁稿鎹囬幃妤呮晲鎼粹€愁潾闂佷紮绠戦悧鎾诲箖濡ゅ啯鍠嗛柛鏇ㄥ墰椤︺劑鏌ｉ姀鈺佺仭閻㈩垳鍠栭幃姗€骞掑Δ浣哄幗闂佺粯鍔曢顓㈠煝閹剧粯鐓冪憸婊堝礈濞嗘挸鍌ㄩ柡宥冨妿閻濆爼鏌￠崶銉ョ仾闁抽攱鍨块弻娑樷攽閸℃浼€闂佸疇顕чˇ鐢稿蓟濞戞埃鍋撻敍鍗炲暕婢规洟姊婚崒娆掑厡閺嬵亝銇勯幋婵囶棦妤犵偞鍔欓獮鏍ㄧ瑹婵犲嫮鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛鈩冪⊕閻撴洟鎮橀悙鎻掆挃闁轰焦鐗犻弻鏇熺箾閻愵剚鐝曢梺鎶芥敱閸ㄥ潡寮诲☉妯锋斀闁糕剝顨忔导鍌氼渻閵堝骸浜剧紒鐘虫崌瀵鈽夐姀鐘电潉闂侀€炲苯澧寸€规洖缍婂畷绋课旈崘銊с偊闂備礁鎲￠崝锕傚窗閺嶎叏缍栭柛娑樼摠閻撳繘鏌涢锝囩畺闁革絽婀辩槐鎺楀箛椤撶姭濮囩紓浣虹帛缁诲牓骞冩禒瀣棃婵炵缈伴崹浠嬪箖濡も偓椤繈姊荤€靛憡鏅兼繝纰樷偓鍐茬骇闁告梹鐟ラ锝夊箻椤旂⒈娼婇梺鎶芥暜閸嬫捇鏌熸搴ｅ笡缂佺粯绋掑蹇涘礈瑜嶉崺宀勬⒑绾懎袚缂侇喖娴烽崚鎺楀籍閸喎鈧粯淇婇鐐存珳缂併劌顭峰娲濞戣鲸顎嗛梻鍌氬鐎氼剟鎮惧畡鎵殕闁逞屽墴閸┾偓妞ゆ帒鍠氬鎰箾閸欏鑰块柕鍡楀暣瀹曘劍娼忛崜褏鈼ゆ繝鐢靛Т閿曘倝鎮ч崱娑欏€块柛顭戝亖娴滄粓鏌熼崫鍕棞濞存粍鍎抽—鍐Χ閸℃鈹涚紓鍌氱С缁舵岸濡存笟鈧鎾閳╁啯鐝栭梻渚€鈧偛鑻晶鎵磼椤斿墽甯涚紒缁樼箓椤繈顢橀悙鈺佷壕闁割煈鍋嗙粻楣冩煙鐎电ǹ鍓卞ù鐘靛亾閵囧嫯绠涢幘鎰佷紝闂佹悶鍊栧ú鐔煎蓟濞戞粠妲煎銈冨妼濡繈宕哄☉銏犵闁绘ê鍟块弸鎴︽⒑缂佹﹩娈旈柣妤€妫涚划顓㈠箳閹炽劎鎳撻オ浼村焵椤掑嫬纭€闁规儼妫勯拑鐔哥箾閹寸儐鐒搁柣鏃傚帶閹硅埖銇勯幘璺盒ラ柛姗嗗灦濮婄粯鎷呯粵瀣異闂佸摜濮电敮锟犲春閳ь剚銇勯幒宥囧妽闁诲繘浜堕弻锛勨偓锝庝邯閸欏嫰鏌″畝鈧崰鏍х暦濠婂棭妯侀柦妯煎枛濮婇缚銇愰幒鎾存殸濠碉紕鍋樼划娆忣嚕婵犳碍鏅插璺侯儏娴滃綊姊虹粙璺ㄧ闁硅櫕鎹囧畷娲川鐎涙ǚ鎷洪梺鍛婄☉閿曘儵鎮￠妷鈺傜厽妞ゆ挾鍋涢埀顒佹倐椤㈡岸鏁愭径濠勵啇婵炶揪绲介幗婊堫敇濞差亝鈷戦柟绋垮閳锋帡鏌￠崪浣镐喊鐎规洏鍨介獮鏍ㄦ媴閸︻厼骞楅梺鐟板悑閹矂宕瑰畷鍥╃煋闂傚牊鑰介悷鎵冲牚闁告劦浜滈悡鐔兼⒑鐠団€虫珯缂佺粯绻傞悾宄拔旈崘銊︾€抽柡澶婄墱閻撳牓宕澶嬧拻濞达綀娅ｇ敮娑㈡煕閺冣偓椤洦绂嶇粙搴撴瀻闁瑰濮崇粭澶嬬節閻㈤潧校缁炬澘绉归幃鈥斥槈濡繐缍婇弫鎰板醇椤愶絿绉烽柣搴ゎ潐濞叉牠鎯岄崒鐐茶摕闁斥晛鍟刊鎾偡濞嗗繐顏╃痪鐐▕濮婄儤娼幍顔煎闂佸湱鎳撳ú顓烆嚕椤愶箑绠荤紓浣股戝▍銏ゆ⒑鐠恒劌娅愰柟鍑ゆ嫹


	void setCameraParams(const cv::Mat& camMatrix, const cv::Mat& distCoeffs);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矋椤ㄣ儵鎮欑€电ǹ鈪归柤鎸庡姈閵囧嫰骞掗崱妞惧濠电姷顣介埀顒傚仺閸嬨垽鏌″畝瀣М妤犵偞甯￠獮瀣偐鏉堚晠鈹忛梻鍌欑窔濞佳兠洪妶鍥ｅ亾濮橆偄宓嗛柣娑卞櫍楠炴帒螖閳ь剛绮婚敐鍡欑瘈闂傚牊绋戦弳娆徝瑰⿰鍫㈢暫闁哄瞼鍠栧鑽も偓闈涘濡差噣姊洪崨濠傜仼濠电偐鍋撳Δ鐘靛仦閻楁洝褰佸銈嗗坊閸嬫挸鈹戦垾鑼煓闁哄矉缍侀獮妯兼崉閻戞浜梻浣告惈鐞氼偊宕濆畝鍕厴闁硅揪绠戦獮銏ゆ煃閸濆嫬鈧劙濡搁埡鍌楁嫼婵炴潙鍚嬮悷褏绮欑紒妯圭箚闁绘劖澹嗛惌娆戔偓娈垮枛椤兘寮澶婄妞ゅ繐鎳庢刊浼存⒑閼姐倕孝婵炶绠掗妵鎰板礃椤曞棛绋忛梺鎼炲労閸撴岸鍩涢幋锔藉仯闁搞儻绲洪崑鎾绘惞椤愩倓绨撮梻鍌欑劍閹爼宕濊箛鎾愭盯宕熼娑樹患闂佺粯鍨煎Λ鍕劔闂備焦瀵ч弻銊︽櫠娴犲鍎婇柛顐犲劜閳锋垿鏌涘☉姗堟敾濠㈣泛瀚湁婵犲﹤鎳庢禒褍顭跨憴鍕鐎规洜枪铻栧ù锝呭级鐎氫粙姊绘担鍛靛綊寮甸鍕仭鐟滄棁妫熼梺鎸庢煥婢х晫澹曢悾灞稿亾楠炲灝鍔氶柟閿嬪灴閻擃剟顢楅崟顒€鐧勯梺缁樻煥閸氬鎮″▎鎾寸厵閻熸瑥瀚慨锕傛煕閵堝棛鎳呯紒杈ㄥ浮閸┾偓妞ゆ帒瀚壕鍏肩箾閹寸偟鎳冪€殿喖鐏濋埞鎴︽晬閸曨偂鍝楀銈嗘肠閸曨収娲告俊銈忕到閸燁垶宕愰崹顐ょ闁割偅绻勬禒銏＄箾閸涱噯鑰块柡灞剧〒閳ь剨缍嗘禍鐑界叕椤掑嫭鐓熸繛鎴濆船閺嬫盯鎽堕敐澶嬬厱闊洦娲栫敮鍫曟煟濠靛懎宓嗘慨濠冩そ瀹曘劍绻濋崟顒€娅戞俊鐐€х粻鎺懳涢崟顔句罕闂備胶绮弻銊╁触鐎ｎ喖鐓曢柟鐑樺灟閳ь剚甯掗～婵嬫晲閸涱剙顥氬┑鐘垫暩閸嬫﹢宕犻悩璇茬倞闁靛ǹ鍎扮純鏇㈡⒒娴ｈ櫣銆婇柛鎾寸箞婵＄敻宕掑锝嗩潔濠碘槅鍨辩划宥呂涢崘銊ф殾妞ゅ繐鎳忔刊鎾偡濞嗗繐顏柣婵囨礋濮婂宕掑▎鎴М婵犮垻鎳撻敃顏勭暦閹达箑宸濇い鎺斿帶閹碱偊锝炲⿰鍫濈劦妞ゆ帒瀚弰銉︾箾閹存瑥鐏╃紒鐙呯秮閺屻劑寮崶顭戞婵炲濯崹璺侯潖閾忚瀚氶柍銉ュ暱缁犳椽鏌ｉ姀鈺佺仭閻㈩垱顨嗙粚杈ㄧ節閸愵亪妾梺鍛婄☉閿曪箓宕㈤幖浣圭厽閹兼惌鍨崇粔鐢告煕鐎ｎ亜顏柟顔斤耿楠炴﹢顢欓悾灞藉箰闁诲骸鍘滈崑鎾绘倵閿濆骸澧伴柨娑氬枛濮婃椽鏌呴悙鑼跺濠⒀冨⒔缁辨挸顓奸崨顕呮！缂備礁鍊哥粔鐟扮暦婵傜ǹ鍗抽柣鏃囨腹缁ㄧ敻姊绘担鍛靛湱鎹㈤幒妤€鐓曢柛顐ｇ妇閺嬫柨霉閻樺樊鍎愰柣鎾跺枛閺岀喖鏌囬敃鈧悘鐘绘煟閵娿劍顏犵紒杈ㄥ浮閹晛顔忛鎯ф倯闂備礁鎼惉濂稿窗閺嶎厹鈧礁鈻庨幘鏉戜患閻庡厜鍋撻柍褜鍓熼幃鈩冨緞閹邦厸鎷洪梺鑽ゅ枑婢瑰棝鏁嶅澶嬬厱閻庯絻鍔岄埀顒佺墬缁岃鲸绻濋崶銊モ偓濠氭煠閹帒鍔滄繛鍛缁辨挻鎷呴崷顓涙濡炪倖鍨电€氫即鐛€ｎ喗鍊婚柤鎭掑劗閹峰姊虹粙鎸庢拱闁煎綊绠栭崺鈧い鎺嗗亾闁搞垺鐓″﹢渚€姊洪幖鐐插妧闁逞屽墴瀵悂寮介鐔哄幐闂佹悶鍎崕閬嶆倶閳哄懏鈷掗柛灞诲€曢悘锕傛煛鐏炶濮傜€殿喗鎸抽幃娆徝圭€ｎ亙澹曢梺鍛婄缚閸庤櫕绋夊鍡愪簻闁哄稁鍋勬禒锕傛煟閹惧崬鍔﹂柡宀嬬秮瀵挳鎮欏ù瀣壕闁革富鍘搁崑鎾愁潩閻愵剙顏�

	int readFile(const char* filePath, int camId);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矒閺屸€崇暆閳ь剟宕伴弽顓炵畺鐟滄柨鐣锋總鍛婂亜闁告繂瀚▓銉╂⒒閸屾瑧顦﹂柟璇х節瀹曞湱鎲撮崟顒€寮块梺鍦檸閸犳牠鎮″鈧弻鐔告綇妤ｅ啯顎嶉梺绋款儐閸旀瑩骞冨Δ鍛嵍妞ゆ挾鍊姀掳浜滈柕澶涘缁犳绱掓潏銊﹀鞍闁瑰嘲鎳樺畷顐﹀礋绾版ê浜剧€光偓閸曨剛鍘遍梺闈浨归崕鎶芥晬瀹ュ棔绻嗛柛娆忣槸婵秵顨ラ悙鏉戞诞妤犵偛顑夐幃鈺呮惞椤愩倖娈惧┑鐘垫暩婵兘寮崨濠冨弿闁圭虎鍠栭悿顔姐亜閺嶎偄鍓遍柡浣稿€块弻锝夊箳閺傚じ妲愬┑顔硷工椤嘲鐣烽幒鎴僵妞ゆ垼妫勬禍楣冩煙闂傚顦︾痪鎯ф贡閳ь剛鎳撶€氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫燂耿閺屽秷顧侀柛鎾寸懅缁顓兼径濠勶紵闂備緡鍓欓崡鏇㈠炊閵娿儺鍤ら梺鍝勵槹閸ㄧ敻骞嗛悙鐑樷拺缁绢厼鎳忚ぐ褏绱掗悩鍐茬仼缂侇喗妲掗妵鎰板箳閹寸娀鐛撻梻浣稿閸嬪懐鎹㈤崒鐐茬厱闁哄啫鍊荤壕濂告倵閿濆簼鎲鹃柣鎾炽偢閺岋紕浠﹂崜褜鐏辩紓浣哄У閻╊垰顕ｉ鈧畷鎺戔堪閸涱厼杈呮繝鐢靛У椤旀牠宕伴弽顓熸櫇闁靛鍎哄〒濠氭煢濡警妲洪柡鍡閹叉悂鎮ч崼婵呭垔闂佽桨绀侀澶愬蓟濞戞ǚ妲堥柛妤冨仜缁犺绻濋姀銏″殌闁绘锕ョ粚杈ㄧ節閸ャ劌鈧攱銇勮箛鎾愁仱闁稿鎹囧鎾偐閸愭彃绨ラ梻浣筋潐婢瑰棙鏅跺Δ鍛；濠㈣埖鍔栭悡鐔兼煙閹冩毐闁伙负鍔嶇换娑㈠礂閼测晛鈷岄梺鍝勭潤閸℃瑧鏉稿┑顔矫崥瀣礊閸儲鍊甸悷娆忓缁€鈧銈忓閺佽顕ｆ繝姘嵆闁绘棁娅ｉ鏇㈡⒑閸撹尙鍘涢柛鐘崇墬閹便劑寮撮姀鈾€鎷洪柣鐘叉处閻擄繝宕ｉ崟顓犵＜闁绘ê纾晶顏呫亜椤愩垻绠伴悡銈嗐亜韫囨挸顏х紒鍗炵埣濮婃椽宕ㄦ繝鍐槹濠电偘鍖犻崶褏顦梺鍝勵槹椤戞瑥銆掓繝姘厪闁割偅绻堥妤侇殽閻愯揪鑰块柡灞剧缁犳盯寮幘鍏夊亾閸ф鐓欐い鏃囶嚙瀹撳棙銇勯姀锛勬噮闁圭懓瀚版俊姝岊槼婵犮垺鍨垮缁樻媴缁涘缍堥悗瑙勬礃閿曘垹鐣峰ú顏勫唨鐟滃寮搁弮鈧换婵嬫濞戝崬鍓遍梺鎶芥敱閸ㄥ潡寮诲☉妯锋斀闁糕剝顨忔导灞解攽閳╁啫绲婚柛姘儑閹广垹鈽夊▎蹇曠獮闁诲函缍嗛崑鍡浰囬弶璇炬棃鎮╅棃娑楃捕闂佸摜鍣ラ崹宕囩磽閹惧顩烽悗锝庝簻缁愭稒绻濋悽闈涗户闁稿鎸鹃埀顒佷亢濡嫰鍩為幋锔藉€烽柤鎼佹涧濞懷呯磽閸屾氨袦闁稿鎸荤换婵嗏枔閸喗鐏侀梺绋匡攻椤ㄥ懘鍩ユ径鎰仺缂佸娼￠崬鍫曟⒑閸濆嫭宸濋柛鐘虫崌瀹曘垽鏌嗗鍡忔嫼缂傚倷鐒﹂埣銈夘敂閸繄鏌堥梺鍦圭€涒晠宕ｈ箛鏇楀亾楠炲灝鍔氭繛鑼█瀹曟垿骞橀弬銉︾亖闂佸壊鐓堥崰妤呮倶閸儲鈷戠痪顓炴媼閸ゅ绱掓潏銊︾妤犵偞鍨挎慨鈧柣姗嗗亝閺傗偓闂備胶纭跺褔寮插⿰鍫濈＝闂傚牊渚楀〒濠氭煏閸繃顥滅紒妤佸浮閺屾稓鈧綆浜濋ˉ銏⑩偓瑙勬处閸撶喖骞冩禒瀣窛濠电偟鍋撶€氳棄鈹戦悙鑸靛涧缂傚秮鍋撳┑鐐叉嫅缁插潡寮灏栨闁靛骏绱曢崢閬嶆⒑闂堟胆褰掑磿闁秴绠栭柟杈鹃檮閻撴瑥銆掑顒備虎濠殿喖鍊搁埞鎴︽闁糕晜鐗曢銉╁礋椤掑倻鐦堥梺鍛婃处閸撴盯宕ｉ崟顖涒拻闁稿本鐟чˇ锔剧磽瀹ュ拑宸ラ摶鐐烘煕瑜庨〃鍡涘磹閸ф鐓ラ柡鍥╁仜閳ь剙缍婂畷鎴﹀磼濞戞氨顔曢梺鐟扮摠閻熴儵鎮橀鍫熺厽闁规儳鐡ㄧ粈瀣煙椤旀枻鑰块柟顔界懇楠炲秹顢欓悙顒佺槣濠碉紕鍋戦崐鏇犳崲閹扮増鍋嬮柛鈩冪⊕閸婂潡鏌涢…鎴濅簴濞存粍绮撻弻鐔煎传閸曨厜銉╂煕韫囨捁瀚版い顓″劵椤︾懓霉濠婂啰鍩ｇ€殿喛顕ч濂稿醇椤愶綆鈧洭姊绘担鍛婂暈闁规瓕顕ч悾婵嬪箹娴ｅ摜鐤囧┑鐘绘涧椤戝懐绮堥崼銏″枑闊洦娲滈惌鍡椻攽閻樻彃鈧敻寮ㄦ禒瀣厽婵☆垰鎼痪褔鏌熼崗鐓庡闁哄矉绠撳畷姗€顢旈崟顒備邯闂備礁鎼張顒€煤濡吋宕叉繛鎴欏灪閸婇攱銇勯幒宥堝厡鐟滄澘妫濆缁樻媴閸涢潧缍婇、鏍川椤栨浜炬慨姗嗗亜瀹撳棛鈧鍠涢褔鍩ユ径濞㈢喖鏌ㄧ€ｅ灚缍屽┑鐘愁問閸犳銆冮崨瀛樺亱闁糕剝蓱閸欏繑绻涢幋鐐垫噮缂佺娀绠栭幃妤呮偨閻ц婀遍弫顕€宕奸弴鐔封偓鍨叏濮楀棗骞楃紒璺哄级閵囧嫰顢曢姀銏㈩唹闂侀潧鐗炴俊鍥箟濡ゅ懎围闁告洦鍓涘鏍⒒閸屾瑧顦︽繝鈧柆宥呯？闁靛牆娲﹀畷鏌ユ煕閹伴潧鏆夊鑸靛姇閸愨偓濡炪倖鎸鹃崯鍧楀箯閾忓湱纾藉ù锝呭閸庢挻绻涙径瀣缂侇喖顭峰濠氬Ψ閿旀儳寮抽梻浣告惈濞诧箓鏁嬮梺璇茬箚閺呮粓濡甸崟顖氬嵆妞ゅ繐妫涜ⅵ婵＄偑鍊戦崹鍝劽洪悢鐓庢瀬闁告劦鍠栭悞鍨亜閹烘垵鈧粯绋夊澶嬬厾濠殿喗鍔曢埀顒侇殘婢规洟鎸婃竟婵嗙秺閺佹劙宕煎┑鍛殫闂備胶鎳撻悺銊х紦妤ｅ啫鍑犵€广儱顦伴悡蹇涚叓閸パ屽剰闁逞屽墯閻楃娀宕哄☉銏犵闁挎棁妫勬禒顖炴⒑鐠団€冲箺閻㈩垱甯楁穱濠囧礂閼测晝顔曢梺鍛婁緱閸犳牗鎱ㄥ澶嬬厸鐎光偓閳ь剟宕伴弽褏鏆︽繛鍡樻尭鍥撮梺绯曞墲椤ㄥ繑瀵奸敓锟�

	void setObjPoints(ArmorType type, double width, double height);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矒閺屸€崇暆閳ь剟宕伴弽顓炵畺鐟滄柨鐣锋總鍛婂亜闁告繂瀚▓銉╂⒒閸屾瑧顦﹂柟璇х節瀹曞湱鎲撮崟顒€寮块梺鍦檸閸犳牠鎮″鈧弻鐔告綇妤ｅ啯顎嶉梺绋款儐閸旀瑩骞冨Δ鍛嵍妞ゆ挾鍊姀掳浜滈柕澶涘缁犳绱掓潏銊﹀鞍闁瑰嘲鎳樺畷顐﹀礋绾版ê浜剧€光偓閸曨剛鍘遍梺闈浨归崕鎶藉春閿濆洠鍋撳▓鍨灈妞ゎ厾鍏樺顐﹀箛椤撶偟绐炴繝鐢靛Т鐎氱兘宕ラ崨瀛樷拻濞达絿鎳撻婊呯磼鐠囨彃鈧潡鐛径濞炬闁靛繒濮烽鎺旂磽閸屾瑧鍔嶆い顓炴喘瀹曘垽骞栨担鍏夋嫼闂佸憡绋戦敃锝囨闁秵鐓曢柣妯诲墯濞堟粎鈧娲橀崝娆撶嵁閸ヮ剚鍋嬮柛顐犲灩楠炴劙鏌ｆ惔鈥冲辅闁稿鎹囬幃妤呮晲鎼粹€愁潾闂佷紮绠戦悧鎾诲箖濡ゅ啯鍠嗛柛鏇ㄥ墰椤︺劑鏌ｉ姀鈺佺仭閻㈩垳鍠栭幃姗€骞掑Δ浣哄幗闂佺粯鍔曢顓㈠煝閹剧粯鐓冪憸婊堝礈濞嗘挸鍌ㄩ柡宥冨妿閻濆爼鏌￠崶銉ョ仾闁抽攱鍨块弻娑樷攽閸℃浼€闂佸疇顕чˇ鐢稿蓟濞戞埃鍋撻敍鍗炲暕婢规洟姊婚崒娆掑厡閺嬵亝銇勯幋婵囶棦妤犵偞鍔欓獮鏍ㄧ瑹婵犲嫮鈼ゆ繝鐢靛█濞佳囶敄閹版澘鏋侀柛鈩冾樅瑜版帗鏅查柛銉ｅ妽閻濐亜顪冮妶鍐ㄧ仼闁硅櫕锚椤繒绱掑Ο璇差€撻梺缁樺灦閿氭繛鍫濈焸閹鈻撻崹顔界亪闂佺粯鐗曢妶鍛婁繆閹绢喖绀冮柍鍝勫暟閻﹀牓姊虹粙鎸庢拱缂侇喖绉撮埢鎾淬偅閸愨斁鎷洪梻鍌氱墛娑撶懓鈽夐姀鐘靛姦濡炪倖甯掔€氼剛澹曟繝姘厵闁绘劦鍓氶悘杈ㄤ繆閹绘帞澧涚紒缁樼洴瀹曘劑鎮ч崼銏犳锭闂備焦鎮堕崝搴ㄥ极婵犳艾鏄ラ柕蹇曞閸氬顭跨捄琛＄湅婵炵厧锕娲濞戞艾顣哄┑鈽嗗亜閻倿鐛箛鏃傜瘈婵﹩鍘搁幏铏圭磽娴ｅ壊鍎愰悗绗涘喛鑰垮ù鐓庣摠閻撶姷鎲搁悧鍫濈闁伙綀娅ｉ埀顒侇問閸犳绻涙繝鍐╁弿闁逞屽墴閺屻劌鈽夊Ο渚紑濡炪倖姊瑰ú妯兼崲濠靛顫呴柨婵嗘閵嗘劕顪冮妶鍡楃仴婵炲樊鍙冨畷鐑樼節閸パ冨祮闂侀潧楠忕槐鏇㈠储闂堟侗娓婚柕鍫濇婢ь剛绱掔€ｎ偄娴柟顕嗙節婵＄兘鏁傜紒姗嗗敹婵＄偑鍊曠换鎰板疮椤愩垻鏆ら柛鈩冪憿閸嬫挾鎲撮崟顒傤槶闂佸憡顭嗛崶褏鍘撮梺纭呮彧缁犳垿鏌嬮崶銊ｄ簻闁规壋鏅涢悘顏堟煛閸″繑娅婃慨濠傤煼瀹曟帒顫濋钘変壕闁绘垼濮ら崵鍕煕閹捐尙顦﹂柛銊︾箖閵囧嫰寮介顫捕闂佹悶鍔岄崐鍧楀蓟濞戞粎鐤€闁规崘娅曢崐顖炴⒑閸涘﹦鎳冪紒缁橈耿瀵寮撮姀鐘诲敹濠电姴鐏氶崝鏍懅闂傚倷鐒﹂惇褰掑磹濠靛牏涓嶉柡宥庡幖閽冪喖鏌ｉ弬鍨倯闁抽攱甯￠幃妤呮偨閻ф槒顫夋穱濠冪鐎ｎ偀鎷虹紓鍌欑劍钃遍悘蹇庡嵆閺岋綁鍩℃繝鍌滀桓閻庢鍠涢褔鍩ユ径濠庢僵妞ゆ劧绲芥刊鏉库攽閻愭潙鐏﹂柡灞诲姂楠炲繒鈧綆鍋嗛々鍙夈亜韫囨挾澧曢柡鍕╁劦閺屽秷顧侀柛鎾村哺婵＄敻宕熼姘鳖唺閻庡箍鍎遍悧鍡涘储閳╁啰绡€闁冲皝鍋撻柛銉檮閸犳岸姊洪崫鍕缂佸鍏樼瘬濞撴埃鍋撻柡灞剧洴楠炴﹢寮堕幋婵囨嚈闂備胶顢婂▍鏇犳崲閸繄鏆︽繝濠傛－濡插墽绱撴担鎻掍壕婵犵數濮撮崐鐢稿绩娴犲鐓熸俊顖氭惈缁狙囨煙閸忕厧濮嶉柡宀嬬畵瀹曟﹢顢旈崟顒備邯闂備礁鎼張顒€煤濡吋宕叉繛鎴欏灪閸婇攱銇勯幒宥堝厡鐟滄澘妫濆缁樻媴閸涢潧缍婇、鏍川椤栨浜炬慨姗嗗亜瀹撳棛鈧鍠涢褔鍩ユ径濞㈢喖鏌ㄧ€ｅ灚缍屽┑鐘愁問閸犳銆冮崨瀛樺亱闁糕剝蓱閸欏繑绻涢幋鐐垫噮缂佺娀绠栭幃妤呮偨閻ц婀遍弫顕€宕奸弴鐔封偓鍨叏濮楀棗骞楃紒璺哄级閵囧嫰顢曢姀銏㈩唹闂侀潧鐗炴俊鍥箟濡ゅ懎围闁告洦鍓涘鏍⒒閸屾瑧顦︽繝鈧柆宥呯？闁靛牆娲﹀畷鏌ユ煕閹伴潧鏆夊鑸靛姇閸愨偓濡炪倖鎸鹃崯鍧楀箯閾忓湱纾藉ù锝呭閸庢挻绻涙径瀣缂侇喖顭峰濠氬Ψ閿旀儳寮抽梻浣告惈濞诧箓鏁嬮梺璇茬箚閺呮粓濡甸崟顖氬嵆妞ゅ繐妫涜ⅵ婵＄偑鍊戦崹鍝劽洪悢鐓庢瀬闁告劦鍠栭悞鍨亜閹烘垵鈧粯绋夊鍛斀闁绘ê纾。鏌ユ煕鐎ｅ墎绉柡灞剧洴婵＄兘骞嬪┑鍡樻婵°倗濮村ú銈夆€旈崘顔嘉ч柛鎰╁妼婵洜绱撴担绛嬪殭闁绘妫濋敐鐐剁疀閹句焦妞介、鏃堝椽娴ｈ妫冨┑鐘垫暩閸嬬偤宕归崼鏇熷殞濡わ絽鍟ㄩ埀顒€鍊垮畷顐﹀礋閵婏附鏉搁梻浣哥枃濡嫬螞濡や胶顩叉繝闈涙储娴滄粓鏌曟繛鍨姷闂婎剦鍓熼弻鏇㈠幢閺囩姷鐛㈤悗娈垮櫘閸ｏ絽鐣烽悡搴樻斀閻庯綆浜濋弳顏堟⒒閸屾瑧顦﹂柟纰卞亜鐓ら柕濞炬櫅閻ゎ噣鏌涜椤ㄥ懐绮婚娑氱鐎瑰壊鍠曠花濂告煟閹捐泛鏋涢柡宀嬬到铻ｉ柛婵嗗缁楊參姊洪悡搴☆棌濞存粠浜璇测槈閵忕姵顥濋柣鐘充航閸斿酣宕濋鐐村€垫繛鍫濈仢閺嬬喖鏌熼鐓庘偓鍧楁偘椤旈敮鍋撻敐搴℃灍闁哄懏绮撻弻锝夋晲閸涙澘顏Δ鐘靛仦閸旀瑥顫忛搹瑙勫珰闁圭粯甯掑В鎰磽閸屾氨孝婵☆偅鐟х划瀣吋婢跺﹪鍞堕梺鍝勬川閸犲孩绂嶅Δ鍛拺缂佸娉曠粻鎶芥煃瀹勬壆澧曢柍缁樻尰缁傛帞鈧綆鍋嗛崢浠嬫⒑瑜版帒浜伴柛銊ゅ嵆閹啴鎼归崷顓狅紲闂佺粯锚濡﹪鎮℃總鍛婄厸閻忕偟枪婢ф煡鏌熷畡鐗堝櫧闁瑰弶鎸冲畷鐔碱敃閵堝繒澶勯梻鍌氬€峰ù鍥ь浖閵娾晜鍊块柨鏇炲€哥粻鏌ユ煕閵夘喖澧柡瀣╃窔閺岀喖宕滆鐢盯鏌￠崨顔藉€愰柡灞诲姂閹倝宕掑☉姗嗕紦

	void getImgpPoints(std::vector<cv::Point2f> image_points);//闂傚倸鍊搁崐鎼佸磹閹间礁纾归柟闂寸绾惧綊鏌熼梻瀵割槮缁炬儳婀遍埀顒傛嚀鐎氼參宕崇壕瀣ㄤ汗闁圭儤鍨归崐鐐烘偡濠婂喚妯€鐎殿喗鎮傚浠嬵敇閻斿搫骞愰梻浣规偠閸庮垶宕曢柆宥嗗€堕柍鍝勫暟绾惧ジ鏌熼柇锕€寮炬繛鍫熺矒閺屸€崇暆閳ь剟宕伴弽顓炵畺鐟滄柨鐣锋總鍛婂亜闁告繂瀚▓銉╂⒒閸屾瑧顦﹂柟璇х節瀹曞湱鎲撮崟顒€寮块梺鍦檸閸犳牠鎮″鈧弻鐔告綇妤ｅ啯顎嶉梺绋款儐閸旀瑩骞冨Δ鍛嵍妞ゆ挾鍊姀掳浜滈柕澶涘缁犳绱掓潏銊﹀鞍闁瑰嘲鎳樺畷顐﹀礋绾版ê浜剧€光偓閸曨剛鍘遍梺闈浨归崕鎶藉春閿濆洠鍋撳▓鍨灈妞ゎ厾鍏樺顐﹀箛椤撶偟绐炴繝鐢靛Т鐎氱兘宕ラ崨瀛樷拻濞达絿鎳撻婊呯磼鐠囨彃鈧潡鐛径濞炬闁靛繒濮烽鎺旂磽閸屾瑧鍔嶆い顓炴喘瀹曘垽骞栨担鍏夋嫼闂佸憡绋戦敃锝囨闁秵鐓曢柣妯诲墯濞堟粎鈧娲橀崝娆撶嵁閸ヮ剦鏁囬柣鏂垮槻娴煎骸鈹戦悩鍨毄濠殿喗鎸冲畷鎴﹀幢濞戞瑥浜楅梺鍏肩ゴ閺備線宕戦幘鑸靛枂闁告洦鍓涢ˇ銊╂⒑閹稿孩纾搁柛銊ょ矙婵″瓨鎷呴崜鍙夊缓闂侀€炲苯澧存鐐插暣婵偓闁靛牆鎳愰悾鎶芥⒑閻熺増鎯堟俊顐ｎ殕缁傚秵銈ｉ崘鈺冨幍闂佽顔栭崰鏍€傛總鍛婄厽闁规儳顕幊鍥煛瀹€瀣М妤犵偞锕㈤幖褰掝敃閿濆懘妫烽梻鍌欑濠€閬嶅疾椤愶絾鍙忓瀣椤洟鏌熼悜姗嗘闁轰礁锕弻銈夊箒閹烘垵濮庣紒鍓у亾婵炲﹤顫忛搹鍦＜婵☆垰婀辩换渚€姊洪崫銉バｇ紒瀣尵閸掓帞鎷犲ù瀣潔濠碘槅鍨堕弨閬嶏綖瀹ュ應鏀介柣鎰级椤ユ粎绱掔拠宸剶闁诡垪鍋撳銈呯箰閹冲秶鎹㈤崱娑欑厽闁规澘鍚€缁ㄥ鏌嶈閸撴岸鎮ч悩璇茬畺鐟滄棃銆佸鈧幃鈺呮嚑椤掑倻鎽屾繝寰锋澘鈧呭緤娴犲鐭楁繝闈涙搐缁剁偤鎮楅敐搴″闁伙箑鐗撳娲箹閻愭彃濮岄梺鍛婃煥椤︾敻鐛箛鏇犵＜婵☆垵鍋愰鏇㈡煛婢跺﹦澧曞褏鏅划鏃堫敆閳ь剟鍩為幋锔绘晩闁告繂瀚ч崑鎾澄旈埀顒勫煡婢舵劖鍋ㄧ紒瀣健閸炲爼姊洪崫鍕窛闁哥姵鎹囧畷銏ゆ焼瀹ュ棌鎷虹紓鍌欑劍閳笺倝顢旈崼婵堟焾闂佸湱枪鐎涒晠宕ｈ箛鏇楀亾楠炲灝鍔氭繛鑼█瀹曟垿骞橀弬銉︾亖闂佸壊鐓堥崰妤呮倶閸儲鈷戠痪顓炴媼閸ゅ绱掓潏銊︾妤犵偞鍨挎慨鈧柣姗嗗亝閺傗偓闂備胶纭跺褔寮插⿰鍫濈＝闂傚牊渚楀〒濠氭煏閸繃顥滅紒妤佸浮閺屾稓鈧綆浜濋ˉ銏⑩偓瑙勬处閸撶喖骞冩禒瀣窛濠电偟鍋撶€氳棄鈹戦悙鑸靛涧缂傚秮鍋撳┑鐐叉嫅缁插潡寮灏栨闁靛骏绱曢崢閬嶆⒑闂堟胆褰掑磿闁秴绠栭柟杈鹃檮閻撴瑥銆掑顒備虎濠殿喖鍊搁埞鎴︽闁糕晜鐗曢銉╁礋椤掑倻鐦堥梺鍛婃处閸撴盯宕ｉ崟顖涒拻闁稿本鐟чˇ锔剧磽瀹ュ拑宸ラ摶鐐烘煕瑜庨〃鍡涘磹閸ф鐓ラ柡鍥╁仜閳ь剙缍婂畷鎴﹀磼濞戞氨顔曢梺鐟扮摠閻熴儵鎮橀鍫熺厽闁规儳鐡ㄧ粈瀣煙椤旀枻鑰块柟顔界懇楠炲秹顢欓悙顒佺槣濠碉紕鍋戦崐鏇犳崲閹扮増鍋嬮柛鈩冪⊕閸婂潡鏌涢…鎴濅簴濞存粍绮撻弻鐔煎传閸曨厜銉╂煕韫囨捁瀚版い顓″劵椤︾懓霉濠婂啰鍩ｇ€殿喛顕ч濂稿醇椤愶綆鈧洭姊绘担鍛婂暈闁规瓕顕ч悾婵嬪箹娴ｅ摜鐤囧┑鐘绘涧椤戝懐绮堥崼銏″枑闊洦娲滈惌鍡椻攽閻樻彃鈧敻寮ㄦ禒瀣厽婵☆垰鎼痪褔鏌熼崗鐓庡闁哄矉绠撳畷姗€顢旈崟顒備邯闂備礁鎼張顒€煤濡吋宕叉繛鎴欏灪閸婇攱銇勯幒宥堝厡鐟滄澘妫濆缁樻媴閸涢潧缍婇、鏍川椤栨浜炬慨姗嗗亜瀹撳棛鈧鍠涢褔鍩ユ径濞㈢喖鏌ㄧ€ｅ灚缍屽┑鐘愁問閸犳銆冮崨瀛樺亱闁糕剝蓱閸欏繑绻涢幋鐐垫噮缂佺娀绠栭幃妤呮偨閻ц婀遍弫顕€宕奸弴鐔封偓鍨叏濮楀棗骞楃紒璺哄级閵囧嫰顢曢姀銏㈩唹闂侀潧鐗炴俊鍥箟濡ゅ懎围闁告洦鍓涘鏍⒒閸屾瑧顦︽繝鈧柆宥呯？闁靛牆娲﹀畷鏌ユ煕閹伴潧鏆夊鑸靛姇閸愨偓濡炪倖鎸鹃崯鍧楀箯閾忓湱纾藉ù锝呭閸庢挻绻涙径瀣缂侇喖顭峰濠氬Ψ閿旀儳寮抽梻浣告惈濞诧箓鏁嬮梺璇茬箚閺呮粓濡甸崟顖氬嵆妞ゅ繐妫涜ⅵ婵＄偑鍊戦崹鍝劽洪悢鐓庢瀬闁告劦鍠栭悞鍨亜閹烘垵鈧粯绋夊鍛斀闁绘ê纾。鏌ユ煕鐎ｅ墎绉柡灞剧洴婵＄兘骞嬪┑鍡樻婵°倗濮村ú銈夆€旈崘顔嘉ч柛鎰╁妼婵洜绱撴担绛嬪殭闁绘妫濋敐鐐剁疀閹句焦妞介、鏃堝椽娴ｈ妫冨┑鐘垫暩閸嬬偤宕归崼鏇熷殞濡わ絽鍟ㄩ埀顒€鍊垮畷顐﹀礋閵婏附鏉搁梻浣哥枃濡嫬螞濡や胶顩叉繝闈涙储娴滄粓鏌曟繛鍨姷闂婎剦鍓熼弻鏇㈠幢閺囩姷鐛㈤悗娈垮櫘閸ｏ絽鐣锋總鍛婂亜闁告稑饪存禒褔姊婚崒娆愮グ婵炲娲熷畷鎶芥晝閸屾氨顔嗛梺璺ㄥ櫐閹凤拷

	void solvePose(int armorType);

	float getYawAngle();

	float getPitchAngle();

	int getDistance();

	std::tuple<double,double,double> getPose();

	void runPoseSolver();

	cv::Point3f getCameraPose();

	 /**
    * @brief 
    * 
    * @param world_coord 
    * @param rvec 
    * @param tvec 
    * @param camera_matrix 
    * @param dist_coeffs 
    * @return cv::Point2f 
    */
    void show_predict(cv::Mat image2show, cv::Mat predict_coord);


	cv::Mat camera_to_pixel(cv::Point3f camera_coord);
	
private:
	cv::Point3f camera_coord;

	PnP_Results pnp_results;

	cv::Mat instantMatrix;	//Camera Matrix
	cv::Mat distortionCoeffs;	//Distortion Coeffs of Camera

	std::vector<cv::Point3f> bigObjPoints;
	std::vector<cv::Point3f> smallObjPoints;

	std::vector<cv::Point2f> imagePoints;

	//cv::Mat rvec ;
	cv::Mat tvec = cv::Mat::zeros(3, 1, CV_64FC1);

	cv::Mat rvec = cv::Mat::zeros(3, 1, CV_64FC1);	//
		//
	
	double pitch, yaw, distance;
	
	ArmorType armorType;

	double GUN_CAM_DISTANCE_Y;

};


#endif 